<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tra cứu USER</title>
    <script>
        async function searchUser() {
            let user = document.getElementById("userInput").value;
            if (!user) {
                alert("Vui lòng nhập USER!");
                return;
            }

            let apiUrl = "https://script.google.com/macros/s/AKfycbyml_gfvkghBk8K3cwid7tg0f6MlPh6QwKX9fUMxcdXwUZaIbQxW3saatsjwOx97EREdw/exec?user=" + encodeURIComponent(user);

            try {
                let response = await fetch(apiUrl);
                let data = await response.json();
                
                let resultDiv = document.getElementById("result");
                resultDiv.innerHTML = ""; 

                if (data.length === 0) {
                    resultDiv.innerHTML = "<p>Không tìm thấy dữ liệu.</p>";
                } else {
                    let table = "<table border='1'><tr>";
                    for (let header of data[0]) {
                        table += `<th>${header}</th>`;
                    }
                    table += "</tr>";

                    for (let row of data) {
                        table += "<tr>";
                        for (let cell of row) {
                            table += `<td>${cell}</td>`;
                        }
                        table += "</tr>";
                    }
                    table += "</table>";

                    resultDiv.innerHTML = table;
                }
            } catch (error) {
                console.error("Lỗi:", error);
                document.getElementById("result").innerHTML = "<p>Lỗi khi lấy dữ liệu!</p>";
            }
        }
    </script>
</head>
<body>
    <h2>Tra cứu USER</h2>
    <input type="text" id="userInput" placeholder="Nhập USER">
    <button onclick="searchUser()">Tìm kiếm</button>
    <div id="result"></div>
</body>
</html>
