<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>B√°o c√°o Doanh thu</title>
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" />
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
  <style>
    body {
      font-family: Arial, sans-serif;
      background-color: #f0f2f5;
      margin: 0;
      padding: 0;
    }

    /* CSS cho n√∫t ·∫©n/hi·ªán v√† Sidebar */
    .toggle-btn {
      position: fixed;
      top: 10px;
      left: 10px;
      z-index: 1000;
      background: none;
      border: none;
      font-size: 24px;
      cursor: pointer;
      color: #333;
    }

    .sidebar {
      position: fixed;
      top: 0;
      left: 0;
      width: 250px;
      height: 100%;
      background-color: #343a40;
      color: white;
      transform: translateX(0);
      transition: transform 0.3s ease;
      z-index: 999;
    }

    .sidebar a {
      color: white;
      padding: 15px;
      text-decoration: none;
      display: block;
      font-size: 16px;
    }

    .sidebar a:hover {
      background-color: #495057;
    }

    .sidebar-hidden .sidebar {
      transform: translateX(-250px);
    }

    .content {
      margin-left: 250px;
      padding: 20px;
      transition: margin-left 0.3s ease;
    }

    .sidebar-hidden .content {
      margin-left: 0;
    }

    /* CSS cho c√°c th·∫ª th√¥ng tin */
    #tong-quan {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
      gap: 20px;
      padding: 20px;
    }

    .card {
      min-width: 250px;
      width: 100%;
      box-sizing: border-box;
      margin-bottom: 20px;
      font-weight: bold;
      border: none;
      border-radius: 10px;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
      background-color: #fff; /* ƒê·∫£m b·∫£o n·ªÅn tr·∫Øng ƒë·ªÉ hi·ªÉn th·ªã ƒë√∫ng tr√™n ·∫£nh ch·ª•p */
    }

    .card:hover {
      transform: translateY(-5px);
      box-shadow: 0 8px 16px rgba(0, 0, 0, 0.2);
    }

    .card-title {
      font-weight: bold;
      color: #004aad;
    }

    .positive {
      color: #28a745;
      font-size: 0.9em;
    }

    .negative {
      color: #dc3545;
      font-size: 0.9em;
    }

    h1 {
      margin-top: 20px;
      margin-bottom: 30px;
      font-weight: bold;
      color: #004aad;
      text-align: center;
    }

    .percentage {
      font-weight: bold;
    }

    .red {
      color: red;
    }

    .green {
      color: green;
    }

    #toggle-filter {
      background-color: #004aad;
      border: none;
      font-weight: bold;
      color: white;
      font-size: 14px;
      padding: 8px 15px;
      border-radius: 5px;
      transition: all 0.3s ease;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }

    #toggle-filter:hover {
      background-color: #0056b3;
      transform: translateY(-2px);
      box-shadow: 0 4px 8px rgba(0,0,0,0.15);
    }

    .filter-section {
      display: none;
      padding: 10px;
      background-color: #fff;
      border: 1px solid #ccc;
      border-radius: 5px;
      margin-bottom: 10px;
    }

    .filter-section button {
      margin: 5px;
    }

    #nganh-hang-table {
      width: 100%;
      border-collapse: separate;
      border-spacing: 0 10px;
      font-weight: bold;
    }

    #nganh-hang-table th {
      background-color: #004aad;
      color: white;
      font-weight: bold;
      padding: 10px;
      text-align: left;
    }

    #nganh-hang-table td {
      padding: 10px;
      font-weight: bold;
      background-color: white;
      border-radius: 5px;
    }

    #nganh-hang-table tr:hover td {
      background-color: #f1f1f1;
      font-weight: bold;
    }

    #nganh-hang-table td:first-child {
      font-weight: bold;
    }

    .apple {
      color: gray;
      font-style: italic;
    }

    .samsung {
      color: blue;
      font-style: italic;
    }

    .xiaomi {
      color: orange;
      font-style: italic;
    }

    .oppo {
      color: green;
      font-style: italic;
    }

    .vivo {
      color: skyblue;
      font-style: italic;
    }

    .negative-bold {
      font-weight: bold;
      color: red;
    }

    .positive-bold {
      font-weight: bold;
      color: green;
    }

    .chuphinh {
      background-color: #004aad;
      border: none;
      font-weight: bold;
      color: white;
      font-size: 14px;
      padding: 8px 15px;
      border-radius: 5px;
      transition: all 0.3s ease;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }

    .chuphinh:hover {
      background-color: #0056b3;
      transform: translateY(-2px);
      box-shadow: 0 4px 8px rgba(0,0,0,0.15);
    }

    /* Responsive cho ƒëi·ªán tho·∫°i */
    @media (max-width: 768px) {
      .sidebar {
        transform: translateX(-250px);
      }

      .content {
        margin-left: 0;
      }

      .sidebar-hidden .sidebar {
        transform: translateX(0);
      }

      #tong-quan {
        grid-template-columns: 1fr;
      }

      .card {
        min-width: 100%; /* ƒê·∫£m b·∫£o th·∫ª chi·∫øm to√†n b·ªô chi·ªÅu r·ªông tr√™n ƒëi·ªán tho·∫°i */
      }
    }
  </style>
</head>
<body>
  <button id="toggle-sidebar" class="toggle-btn">
    <i class="fas fa-bars"></i>
  </button>

  <!-- Sidebar -->
  <div class="sidebar">
    <h4 class="text-center text-white">BI</h4>
    <a href="#tong-quan"><i class="fas fa-chart-line"></i> T·ªïng Quan</a>
    <a href="#nganh-hang"><i class="fas fa-boxes"></i> Ng√†nh H√†ng</a>
    <a href="#nhan-vien"><i class="fas fa-users"></i> Nh√¢n Vi√™n</a>
    <a href="#thi-dua"><i class="fas fa-trophy"></i> Thi ƒêua</a>
  </div>

  <!-- N·ªôi dung ch√≠nh -->
  <div class="content">
    <button id="capture-button" class="chuphinh">Ch·ª•p h√¨nh</button>
    <h1>B√ÅO C√ÅO DOANH THU</h1>

    <div id="tong-quan">
      <div class="card">
        <div class="card-body">
          <h5 class="card-title"><i class="fas fa-chart-bar"></i> Doanh Thu L≈©y K·∫ø</h5>
          <p class="card-text">‚ñπ L≈©y k·∫ø :  <span id="luy-ke"></span> <span class="positive" id="hieu-qua-luy-ke"></span></p>
          <p class="card-text">‚ñπ DKHT :  <span id="dkht-luy-ke"></span></p>
          <p class="card-text"><span id="ti-le-tang-giam"></span></p>
        </div>
      </div>
      <div class="card">
        <div class="card-body">
          <h5 class="card-title"><i class="fas fa-exchange-alt"></i> Doanh Thu Quy ƒê·ªïi</h5>
          <p class="card-text">‚ñπ L≈©y k·∫ø :  <span id="doanh-thu-qui-doi"></span></p>
          <p class="card-text">‚ñπ Hi·ªáu qu·∫£ qui ƒë·ªïi :  <span id="hieu-qua-qui-doi"></span></p>
          <p class="card-text">‚ñπ T·ª∑ tr·ªçng qui ƒë·ªïi :  <span id="ty-trong-quy-doi"></span></p>
        </div>
      </div>
      <div class="card">
        <div class="card-body">
          <h5 class="card-title"><i class="fas fa-bullseye"></i> Target</h5>
          <p class="card-text">‚ñπ Target :  <span id="target"></span></p>
          <p class="card-text">‚ñπ DKHT :  <span id="dkht-target"></span></p>
          <p class="card-text">‚ñπ %DKHT :  <span id="percent-dkht-target" class="percentage"></span></p>
        </div>
      </div>
      <div class="card">
        <div class="card-body">
          <h5 class="card-title"><i class="fas fa-users"></i> TLPV Th√†nh C√¥ng ‚òû <span id="ti-le-pvtc"></span></h5>
          <p class="card-text">‚ñπ L∆∞·ª£t kh√°ch :  <span id="luot-khach"></span></p>
          <p class="card-text">‚ñπ T·ªïng bill :  <span id="tong-bill"></span></p>
          <p class="card-text">‚ñπ S·ªë bill b√°n h√†ng :  <span id="so-bill-ban-hang"></span></p>
        </div>
      </div>
      <div class="card">
        <div class="card-body">
          <h5 class="card-title"><i class="fas fa-credit-card"></i> Tr·∫£ G√≥p</h5>
          <p class="card-text">‚ñπ T·ª∑ tr·ªçng tr·∫£ g√≥p :  <span id="ty-trong-tra-gop" class="percentage"></span></p>
          <p class="card-text">.</p>
          <p class="card-text">.</p>
        </div>
      </div>
      <div class="card">
        <div class="card-body">
          <h5 class="card-title"><i class="fas fa-box-open"></i> B√°n K√®m</h5>
          <p class="card-text">‚ñπ S·ªë bill b√°n k√®m :  <span id="so-bill-ban-kem"></span></p>
          <p class="card-text">‚ñπ T·ª∑ l·ªá b√°n k√®m :  <span id="ty-le-ban-kem" class="percentage"></span></p>
          <p class="card-text">‚ñπ T·ª∑ l·ªá SP b√°n k√®m :  <span id="ty-le-sp-ban-kem" class="percentage"></span></p>
        </div>
      </div>
      <div class="card">
        <div class="card-body">
          <h5 class="card-title"><i class="fas fa-tag"></i> ƒê∆°n Gi√° Ch·ªß L·ª±c</h5>
          <p class="card-text">üì± ƒêi·ªán Tho·∫°i :  <span id="danh-gia-dien-thoai"></span></p>
          <p class="card-text">üíª Laptop :  <span id="danh-gia-laptop"></span></p>
          <p class="card-text">üìü Tablet :  <span id="danh-gia-tablet"></span></p>
        </div>
      </div>
    </div>

    <!-- B·∫£ng d·ªØ li·ªáu Ng√†nh H√†ng -->
    <h3 class="card-title" id="nganh-hang">
      <i class="fas fa-chart-bar"></i> B·∫£ng Ng√†nh H√†ng
      <button type="button" id="toggle-filter" class="btn btn-sm btn-primary ml-3">
        <i class="fas fa-filter"></i> T√πy Ch·ªçn Ng√†nh H√†ng
      </button>
    </h3>
    <div id="filter-section" class="filter-section">
      <div class="mb-2">
        <button type="button" id="select-all" class="btn btn-secondary btn-sm">Ch·ªçn t·∫•t c·∫£</button>
        <button type="button" id="deselect-all" class="btn btn-secondary btn-sm">B·ªè ch·ªçn t·∫•t c·∫£</button>
        <button type="button" id="apply-filter" class="btn btn-primary btn-sm ml-2">X√°c nh·∫≠n</button>
      </div>
      <div id="checkbox-container" class="row"></div>
    </div>
    <div style="overflow-x: auto;">
      <table class="table" id="nganh-hang-table">
        <thead>
          <tr>
            <th>Nh√≥m h√†ng</th>
            <th>S·ªë l∆∞·ª£ng</th>
            <th>Doanh thu qui ƒë·ªïi</th>
            <th>+/- C√πng K·ª≥</th>
            <th>ƒê∆°n Gi√°</th>
            <th>L√£i G·ªôp</th>
            <th>DT Tr·∫£ G√≥p</th>
          </tr>
        </thead>
        <tbody id="table-body">
          <!-- D·ªØ li·ªáu ng√†nh h√†ng s·∫Ω ƒë∆∞·ª£c th√™m v√†o ƒë√¢y -->
        </tbody>
      </table>
    </div>
  </div>

  <script>
    // H√†m ƒë·ªãnh d·∫°ng s·ªë v·ªõi d·∫•u ph√¢n c√°ch h√†ng ngh√¨n
    function formatNumber(x) {
      if (x == null || x == undefined) return "";
      let num = Number(x);
      if (isNaN(num)) return x;
      const sign = num < 0 ? "-" : "";
      num = Math.abs(num);
      return sign + num.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ".");
    }

    // H√†m √°p d·ª•ng ƒë·ªãnh d·∫°ng m√†u s·∫Øc d·ª±a tr√™n ng∆∞·ª°ng cho tr∆∞·ªõc
    function applyConditionalFormatting(elementId, value, thresholds) {
      const element = document.getElementById(elementId);
      if (value < thresholds[0]) {
        element.classList.add("red");
        element.classList.remove("green");
      } else {
        element.classList.add("green");
        element.classList.remove("red");
      }
    }

    // ·∫®n ph·∫ßn t√πy ch·ªçn ng√†nh h√†ng ban ƒë·∫ßu v√† g·∫Øn s·ª± ki·ªán n√∫t T√πy Ch·ªçn Ng√†nh H√†ng
    document.getElementById("filter-section").style.display = "none";
    document.getElementById("toggle-filter").addEventListener("click", function() {
      const filterSection = document.getElementById("filter-section");
      if (filterSection.style.display === "none") {
        filterSection.style.display = "block";
      } else {
        filterSection.style.display = "none";
      }
    });

    // Fetch d·ªØ li·ªáu t·ª´ Google Apps Script (Web App)
    fetch("https://script.google.com/macros/s/AKfycbwN0K17SYU7F5NOXoAcB52VkG3w-GYKgOdXiRVpSC44xO95L-65ydvaSp1IMAvpRuLKOw/exec")
      .then(response => response.json())
      .then(data => {
        // C·∫≠p nh·∫≠t c√°c th·∫ª t·ªïng quan v·ªõi d·ªØ li·ªáu t·ª´ API
        document.getElementById("luy-ke").textContent = formatNumber(data.doanhThuLuyKe * 1000);
        document.getElementById("dkht-luy-ke").textContent = formatNumber(data.dkhtLuyKe * 1000);       
        document.getElementById("hieu-qua-luy-ke").textContent = `${(data.doanhThuGiamLuyKe * 100).toFixed(2)}%`;  
        applyConditionalFormatting("hieu-qua-luy-ke", data.doanhThuGiamLuyKe, [0.0]);
        
        document.getElementById("doanh-thu-qui-doi").textContent = formatNumber(data.doanhThuQuiDoi * 1000);
        document.getElementById("hieu-qua-qui-doi").textContent = formatNumber(data.hieuQuaQuiDoiDT * 1000);
        document.getElementById("ty-trong-quy-doi").textContent = `${(data.hieuQuaQuiDoi * 100).toFixed(2)}%`;
        applyConditionalFormatting("ty-trong-quy-doi", data.hieuQuaQuiDoi, [0.30]);
        applyConditionalFormatting("percent-dkht-target", data.percentDkhtTarget, [1]);
        
        document.getElementById("target").textContent = formatNumber(data.target * 1000);
        document.getElementById("dkht-target").textContent = formatNumber(data.dkhtTarget * 1000);
        document.getElementById("percent-dkht-target").textContent = `${(data.percentDkhtTarget * 100).toFixed(2)}%`;
        
        document.getElementById("danh-gia-dien-thoai").textContent = data.donGiaDienThoai;
        document.getElementById("danh-gia-laptop").textContent = data.donGiaLaptop;
        document.getElementById("danh-gia-tablet").textContent = data.donGiaTablet;
        applyConditionalFormatting("danh-gia-dien-thoai", data.donGiaDienThoai, [8]);
        applyConditionalFormatting("danh-gia-laptop", data.donGiaLaptop, [10]);
        applyConditionalFormatting("danh-gia-tablet", data.donGiaTablet, [7]);
        
        document.getElementById("luot-khach").textContent = data.luotKhach;
        document.getElementById("ti-le-pvtc").textContent = `${(data.tiLePhucVuThanhCong * 100).toFixed(2)}%`;
        applyConditionalFormatting("ti-le-pvtc", data.tiLePhucVuThanhCong, [0.15])
        document.getElementById("tong-bill").textContent = formatNumber(data.tongBill);
        document.getElementById("so-bill-ban-hang").textContent = data.soBillBanHang;
        
        document.getElementById("ty-trong-tra-gop").textContent = `${(data.tyTrongTraGop * 100).toFixed(2)}%`;
        applyConditionalFormatting("ty-trong-tra-gop", data.tyTrongTraGop, [0.40]);
        
        document.getElementById("so-bill-ban-kem").textContent = data.soBillBanKem;
        document.getElementById("ty-le-ban-kem").textContent = `${(data.tyLeBanKem * 100).toFixed(2)}%`;
        document.getElementById("ty-le-sp-ban-kem").textContent = `${(data.tyLeSPBanKem * 100).toFixed(2)}%`;
        applyConditionalFormatting("ty-le-ban-kem", data.tyLeBanKem, [0.20]);

        const tableBody = document.getElementById("table-body");
        const checkboxContainer = document.getElementById("checkbox-container");
        const defaultNganhHang = [
          "NNH ƒêi·ªán tho·∫°i m·ªõi",
          "ƒêi·ªán Tho·∫°i Di ƒê·ªông",
          "Smartphone",
          "Apple",
          "Samsung",
          "Xiaomi",
          "Oppo",
          "Vivo",
          "NNH Laptop",
          "NNH Tablet",
          "NNH Ph·ª• ki·ªán",
          "NNH ƒê·ªìng h·ªì th·ªùi trang",
          "NNH Wearable",
          "NNH VAS",
          "NNH Sim s·ªë"
        ];

        if (checkboxContainer) {
          const colCount = 3;
          const itemsPerCol = Math.ceil(data.danhSachNganhHang.length / colCount);
          for (let i = 0; i < colCount; i++) {
            const colDiv = document.createElement("div");
            colDiv.classList.add("col-md-4");
            for (let j = i * itemsPerCol; j < Math.min((i + 1) * itemsPerCol, data.danhSachNganhHang.length); j++) {
              const nganh = data.danhSachNganhHang[j];
              const checkboxId = `nganh-${j}`;
              const formCheck = document.createElement("div");
              formCheck.classList.add("form-check");
              const checkbox = document.createElement("input");
              checkbox.type = "checkbox";
              checkbox.classList.add("form-check-input");
              checkbox.id = checkboxId;
              checkbox.value = nganh.name;
              if (defaultNganhHang.includes(nganh.name)) {
                checkbox.checked = true;
              }
              const label = document.createElement("label");
              label.classList.add("form-check-label");
              label.htmlFor = checkboxId;
              label.textContent = nganh.name;
              formCheck.appendChild(checkbox);
              formCheck.appendChild(label);
              colDiv.appendChild(formCheck);
            }
            checkboxContainer.appendChild(colDiv);
          }
        }

        function updateTable() {
          const selectedNames = Array.from(document.querySelectorAll('#checkbox-container input[type="checkbox"]:checked'))
                                     .map(cb => cb.value);
          tableBody.innerHTML = "";
          if (selectedNames.length === 0) return;

          data.danhSachNganhHang.forEach(item => {
            if (selectedNames.includes(item.name)) {
              const row = document.createElement("tr");
              let className = "";
              switch (item.name) {
                case "Apple":
                  className = "apple";
                  break;
                case "Samsung":
                  className = "samsung";
                  break;
                case "Xiaomi":
                  className = "xiaomi";
                  break;
                case "Oppo":
                  className = "oppo";
                  break;
                case "Vivo":
                  className = "vivo";
                  break;
                default:
                  break;
              }
              const cungKyValue = (item.hieuQuaCungKy * 100).toFixed(2);
              let cungKyClass = "";
              if (parseFloat(cungKyValue) < 0) {
                cungKyClass = "negative-bold";
              } else if (parseFloat(cungKyValue) > 0) {
                cungKyClass = "positive-bold";
              }
              row.innerHTML = `
                <td class="${className}">${item.name}</td>
                <td>${formatNumber(item.soLuong)}</td>
                <td>${formatNumber(item.doanhThuQuiDoi)}</td>
                <td class="${cungKyClass}">${cungKyValue}%</td>
                <td>${formatNumber(item.donGia)}</td>
                <td>${formatNumber(item.laiGop)}</td>
                <td>${formatNumber(item.dtTraGop)}</td>
              `;
              tableBody.appendChild(row);
            }
          });
          document.getElementById("filter-section").style.display = "none";
        }

        document.getElementById("select-all").addEventListener("click", function() {
          document.querySelectorAll('#checkbox-container input[type="checkbox"]').forEach(cb => {
            cb.checked = true;
          });
        });

        document.getElementById("deselect-all").addEventListener("click", function() {
          document.querySelectorAll('#checkbox-container input[type="checkbox"]').forEach(cb => {
            cb.checked = false;
          });
        });

        document.getElementById("apply-filter").addEventListener("click", updateTable);
        updateTable();
      })
      .catch(error => console.error("Error fetching data:", error));

    // H√†m ch·ª•p h√¨nh c·ªßa ph·∫ßn t·ª≠ v√† t·∫£i xu·ªëng
    function captureElement(element, filename) {
      html2canvas(element, {
        scale: 2, // TƒÉng ƒë·ªô ph√¢n gi·∫£i ƒë·ªÉ ·∫£nh r√µ n√©t h∆°n tr√™n ƒëi·ªán tho·∫°i
        useCORS: true, // H·ªó tr·ª£ t·∫£i t√†i nguy√™n t·ª´ b√™n ngo√†i
        backgroundColor: '#f0f2f5' // ƒê·∫£m b·∫£o n·ªÅn ·∫£nh kh·ªõp v·ªõi n·ªÅn trang
      }).then(canvas => {
        var link = document.createElement("a");
        link.download = filename;
        link.href = canvas.toDataURL();
        link.click();
      });
    }

    // Th√™m s·ª± ki·ªán cho n√∫t "Ch·ª•p h√¨nh"
    document.getElementById("capture-button").addEventListener("click", function() {
      const captureButton = document.getElementById("capture-button");
      const toggleFilterButton = document.getElementById("toggle-filter");

      captureButton.style.display = "none";
      toggleFilterButton.style.display = "none";

      const content = document.querySelector(".content");

      html2canvas(content, {
        scale: 2,
        useCORS: true,
        backgroundColor: '#f0f2f5'
      }).then(canvas => {
        captureButton.style.display = "block";
        toggleFilterButton.style.display = "block";

        var link = document.createElement("a");
        link.download = "anh-chup.png";
        link.href = canvas.toDataURL();
        link.click();
      });
    });

    // Ch·ª•p to√†n b·ªô b√°o c√°o khi click ti√™u ƒë·ªÅ "B√ÅO C√ÅO DOANH THU"
    document.querySelector("h1").addEventListener("click", function() {
      const content = document.querySelector(".content");
      const tableSection = document.querySelector("#nganh-hang-table").parentElement;
      const captureButton = document.getElementById("capture-button");
      const toggleFilterButton = document.getElementById("toggle-filter");
      const nganhHangTitle = document.getElementById("nganh-hang");

      // ·∫®n c√°c ph·∫ßn t·ª≠ kh√¥ng mong mu·ªën
      tableSection.style.display = "none";
      captureButton.style.display = "none";
      toggleFilterButton.style.display = "none";
      nganhHangTitle.style.display = "none";

      html2canvas(content, {
        scale: 2,
        useCORS: true,
        backgroundColor: '#f0f2f5'
      }).then(canvas => {
        // Hi·ªÉn th·ªã l·∫°i c√°c ph·∫ßn t·ª≠
        tableSection.style.display = "block";
        captureButton.style.display = "block";
        toggleFilterButton.style.display = "block";
        nganhHangTitle.style.display = "block";

        var link = document.createElement("a");
        link.download = "bao-cao-doanh-thu.png";
        link.href = canvas.toDataURL();
        link.click();
      });
    });

    // Ch·ª•p b·∫£ng ng√†nh h√†ng khi click ti√™u ƒë·ªÅ "B·∫£ng Ng√†nh H√†ng"
    document.querySelector("#nganh-hang").addEventListener("click", function(e) {
      if (e.target.id !== "toggle-filter") {
        const table = document.querySelector("#nganh-hang-table");
        captureElement(table, "bang-nganh-hang.png");
      }
    });

    // Ch·ª•p t·ª´ng card khi click v√†o card
    document.querySelectorAll(".card").forEach(card => {
      card.addEventListener("click", function() {
        const title = this.querySelector(".card-title").textContent.trim().replace(/\s+/g, "-").toLowerCase();
        captureElement(this, `card-${title}.png`);
      });
    });

    // X·ª≠ l√Ω s·ª± ki·ªán ·∫©n/hi·ªán Sidebar
    document.getElementById('toggle-sidebar').addEventListener('click', function() {
      const container = document.body;
      container.classList.toggle('sidebar-hidden');
      const icon = this.querySelector('i');
      icon.classList.toggle('fa-bars');
      icon.classList.toggle('fa-times');
    });
  </script>
</body>
</html>
